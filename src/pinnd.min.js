!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],function(o){return t.pinnd=n(o)}):t.pinnd=n(t.jQuery)}(this,function(t){return function(n,o){var e=null,i={placeholder:"pinnd-placeholder",pinned:"pinnd",pinnedtop:"pinnd-top",pinnedbottom:"pinnd-bottom"},s={autoenable:!0,context:"body",offset_top:0,offset_bottom:0},p=[],a=t(window),r={init:function(n,o){return t.extend(s,o),n.each(function(){var n={};n.status="unpinned",n.jq=t(this),n.context=n.jq.parents(s.context).length?n.jq.parents(s.context):t("body"),"static"==n.context.css("position")&&n.context.css("position","relative"),n.styles=n.jq.attr("style"),p.push(n)}),s.autoenable&&c.on(),c},enable:function(n){var o=n.ph||t("<div />").addClass(i.placeholder);o.css(n.jq.css(["float","position","clear","display","top","left","right","bottom"])),o.css({height:n.jq.outerHeight(!0),width:n.jq.outerWidth(!0)}),n.ph=o,n.jq.wrap(o),n.jq.css("position","static"),r.setPinPoints(n),r.check(n)},disable:function(t){t.jq.parent("."+i.placeholder).length&&t.jq.unwrap(),r.unpin(t)},scroll:function(){for(var t=0,n=p.length;t<n;t++){var o=p[t];r.check(o)}},resize:function(){if(!e)return!1;for(var t=0,n=p.length;t<n;t++){var o=p[t];o.jq.parent("."+i.placeholder).length&&o.jq.unwrap(),r.unpin(o),r.enable(o),r.check(o)}},setPinPoints:function(t){t.min="unpinned"==t.status?t.jq.offset().top-s.offset_top:t.ph.offset().top-s.offset_top,t.max=t.context.offset().top+t.context.outerHeight(!0)-(t.jq.outerHeight(!0)+s.offset_top+s.offset_bottom)},check:function(t){switch(!0){case t.min<0||a.scrollTop()<=t.min:r.unpin(t);break;case a.scrollTop()>=t.max:r.pinToBottom(t);break;default:r.pinToTop(t)}},pinToTop:function(t){"pinned-top"!=t.status&&(t.status="pinned-top",t.jq.css({position:"fixed",height:t.jq.height(),width:t.jq.width(),top:s.offset_top,bottom:"auto"}),t.jq.removeClass(i.pinnedbottom).addClass(i.pinnedtop).addClass(i.pinned),"function"==typeof s.onpintop&&s.onpintop(t.jq))},pinToBottom:function(t){"pinned-bottom"!=t.status&&("pinned-top"!=t.status&&r.pinToTop(t),t.status="pinned-bottom",t.jq.css({position:"absolute",top:"auto",bottom:s.offset_bottom}),t.jq.removeClass(i.pinnedtop).addClass(i.pinnedbottom).addClass(i.pinned),"function"==typeof s.onpinbottom&&s.onpinbottom(t.jq))},unpin:function(t){t.status="unpinned",t.jq.removeAttr("style").attr("style",t.styles),t.jq.removeClass(i.pinnedtop).removeClass(i.pinnedbottom).removeClass(i.pinned),"function"==typeof s.onunpin&&s.onunpin(t.jq)}},c={on:function(){e=!0,a.on("scroll",r.scroll),a.on("resize",r.resize);for(var t=0,n=p.length;t<n;t++){var o=p[t];r.enable(o)}},off:function(){e=!1,a.off("scroll",r.scroll);for(var t=0,n=p.length;t<n;t++){var o=p[t];r.disable(o)}}};return r.init(n,o)}});