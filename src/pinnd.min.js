!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.pinnd=b(c)}):a.pinnd=b(a.jQuery)}(this,function(a){return function(b,c){var d=null,e={placeholder:"pinnd-placeholder",pinned:"pinnd",pinnedtop:"pinnd-top",pinnedbottom:"pinnd-bottom"},f={autoenable:!0,context:"body",offset_top:0,offset_bottom:0},g=[],h=a(window),i={init:function(b,c){return a.extend(f,c),b.each(function(){var b={};b.status="unpinned",b.jq=a(this),b.context=b.jq.parents(f.context).length?b.jq.parents(f.context):a("body"),"static"==b.context.css("position")&&b.context.css("position","relative"),b.styles=b.jq.attr("style"),g.push(b)}),f.autoenable&&j.on(),j},enable:function(b){var c=b.ph||a("<div />").addClass(e.placeholder);c.css(b.jq.css(["float","position","clear","display","top","left","right","bottom"])),c.css({height:b.jq.outerHeight(!0),width:b.jq.outerWidth(!0)}),b.ph=c,b.jq.wrap(c),b.jq.css("position","static"),i.setPinPoints(b),i.check(b)},disable:function(a){a.jq.parent("."+e.placeholder).length&&a.jq.unwrap(),i.unpin(a)},scroll:function(){for(var a=0,b=g.length;b>a;a++){var c=g[a];i.check(c)}},resize:function(){if(!d)return!1;for(var a=0,b=g.length;b>a;a++){var c=g[a];c.jq.parent("."+e.placeholder).length&&c.jq.unwrap(),i.unpin(c),i.enable(c),i.check(c)}},setPinPoints:function(a){a.min="unpinned"==a.status?a.jq.offset().top-f.offset_top:a.ph.offset().top-f.offset_top,a.max=a.context.offset().top+a.context.outerHeight(!0)-(a.jq.outerHeight(!0)+f.offset_top+f.offset_bottom)},check:function(a){switch(!0){case a.min<0||h.scrollTop()<=a.min:i.unpin(a);break;case h.scrollTop()>=a.max:i.pinToBottom(a);break;default:i.pinToTop(a)}},pinToTop:function(a){"pinned-top"!=a.status&&(a.status="pinned-top",a.jq.css({position:"fixed",height:a.jq.height(),width:a.jq.width(),top:f.offset_top,bottom:"auto"}),a.jq.removeClass(e.pinnedbottom).addClass(e.pinnedtop).addClass(e.pinned),"function"==typeof f.onpintop&&f.onpintop(a.jq))},pinToBottom:function(a){"pinned-bottom"!=a.status&&("pinned-top"!=a.status&&i.pinToTop(a),a.status="pinned-bottom",a.jq.css({position:"absolute",top:"auto",bottom:f.offset_bottom}),a.jq.removeClass(e.pinnedtop).addClass(e.pinnedbottom).addClass(e.pinned),"function"==typeof f.onpinbottom&&f.onpinbottom(a.jq))},unpin:function(a){a.status="unpinned",a.jq.removeAttr("style").attr("style",a.styles),a.jq.removeClass(e.pinnedtop).removeClass(e.pinnedbottom).removeClass(e.pinned),"function"==typeof f.onunpin&&f.onunpin(a.jq)}},j={on:function(){d=!0,h.on("scroll",i.scroll),h.on("resize",i.resize);for(var a=0,b=g.length;b>a;a++){var c=g[a];i.enable(c)}},off:function(){d=!1,h.off("scroll",i.scroll);for(var a=0,b=g.length;b>a;a++){var c=g[a];i.disable(c)}}};return i.init(b,c)}});